"use strict";var baseURL="http://localhost:3000";function loadSongs(){return $("#location_id").val()?($("h1").fadeOut(1e3),$("form").fadeOut(1e3,function(){var t=new google.maps.Geocoder,n=$("#location_id").val();t.geocode({address:n},function(t,n){if(n==google.maps.GeocoderStatus.OK){var e="lat="+t[0].geometry.location.lat(),a="&long="+t[0].geometry.location.lng();$.get(baseURL+"/weather?"+e+a,function(t){displayWeatherAndPlaylist(t)})}else alert("Something went wrong. Try again.")})})):alert("Enter a city fam."),!1}function skycons(){var t,n=new Skycons({color:"#ebebeb"}),e=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy","rain","sleet","snow","wind","fog"];for(t=e.length;t--;)for(var a=e[t],i=document.getElementsByClassName(a),o=i.length;o--;)n.set(i[o],a);n.play()}function displayWeatherAndPlaylist(t){$("#forecast").append("<center><h1>Weather</h1><div class='graphic'><canvas class="+t.skicons+"></canvas></div><h1>"+t.temp+"&deg; "+t.summary+"</h1></center>").hide().fadeIn(2e3);var n="https://open.spotify.com/embed?uri=spotify:user:ovoweather:playlist:"+t.playlistURI;$("#playlist").append("<center><h1>Playlist</h1><iframe src='"+n+"' width='400' height='480' frameborder='0' allowtransparency='true'></iframe></center>").hide().fadeIn(2e3),skycons()}$.get(baseURL+"/authenticate",function(t){}),function(t){var n,e,a,i;a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame,a&&i?(n=function(n,t){var e={value:null};return function t(){e.value=a(t),n()}(),e},e=function(t){i(t.value)}):(n=setInterval,e=clearInterval);var v=.08,F=2*Math.PI,u=2/Math.sqrt(2);function b(t,n,e,a,i){t.beginPath(),t.moveTo(n,e),t.lineTo(a,i),t.stroke()}function h(t,n,e,a,i,o,r,l){var s,h,c,u,d=Math.cos(n*F),f=Math.sin(n*F);h=e-f*i,c=a+d*o+.5*(l-=r),u=r+(1-.5*d)*l,(s=t).beginPath(),s.arc(h,c,u,0,F,!1),s.fill()}function m(t,n,e,a,i,o,r,l){var s;for(s=5;s--;)h(t,n+s/5,e,a,i,o,r,l)}function r(t,n,e,a,i,o,r){n/=3e4;var l=.21*i,s=.12*i,h=.24*i,c=.28*i;t.fillStyle=r,m(t,n,e,a,l,s,h,c),t.globalCompositeOperation="destination-out",m(t,n,e,a,l,s,h-o,c-o),t.globalCompositeOperation="source-over"}function l(t,n,e,a,i,o,r){n/=12e4;var l,s,h,c,u=.25*i-.5*o,d=.32*i+.5*o,f=.5*i-.5*o;for(t.strokeStyle=r,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",t.beginPath(),t.arc(e,a,u,0,F,!1),t.stroke(),l=8;l--;)s=(n+l/8)*F,b(t,e+(h=Math.cos(s))*d,a+(c=Math.sin(s))*d,e+h*f,a+c*f)}function s(t,n,e,a,i,o,r){n/=15e3;var l=.29*i-.5*o,s=.05*i,h=Math.cos(n*F),c=h*F/-16;t.strokeStyle=r,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",e+=h*s,t.beginPath(),t.arc(e,a,l,c+F/8,c+7*F/8,!1),t.arc(e+Math.cos(c)*l*u,a+Math.sin(c)*l*u,l,c+5*F/8,c+3*F/8,!0),t.closePath(),t.stroke()}var O=[[-.75,-.18,-.7219,-.1527,-.6971,-.1225,-.6739,-.091,-.6516,-.0588,-.6298,-.0262,-.6083,.0065,-.5868,.0396,-.5643,.0731,-.5372,.1041,-.5033,.1259,-.4662,.1406,-.4275,.1493,-.3881,.153,-.3487,.1526,-.3095,.1488,-.2708,.1421,-.2319,.1342,-.1943,.1217,-.16,.1025,-.129,.0785,-.1012,.0509,-.0764,.0206,-.0547,-.012,-.0378,-.0472,-.0324,-.0857,-.0389,-.1241,-.0546,-.1599,-.0814,-.1876,-.1193,-.1964,-.1582,-.1935,-.1931,-.1769,-.2157,-.1453,-.229,-.1085,-.2327,-.0697,-.224,-.0317,-.2064,.0033,-.1853,.0362,-.1613,.0672,-.135,.0961,-.1051,.1213,-.0706,.1397,-.0332,.1512,.0053,.158,.0442,.1624,.0833,.1636,.1224,.1615,.1613,.1565,.1999,.15,.2378,.1402,.2749,.1279,.3118,.1147,.3487,.1015,.3858,.0892,.4236,.0787,.4621,.0715,.5012,.0702,.5398,.0766,.5768,.089,.6123,.1055,.6466,.1244,.6805,.144,.7147,.163,.75,.18],[-.75,0,-.7033,.0195,-.6569,.0399,-.6104,.06,-.5634,.0789,-.5155,.0954,-.4667,.1089,-.4174,.1206,-.3676,.1299,-.3174,.1365,-.2669,.1398,-.2162,.1391,-.1658,.1347,-.1157,.1271,-.0661,.1169,-.017,.1046,.0316,.0903,.0791,.0728,.1259,.0534,.1723,.0331,.2188,.0129,.2656,-.0064,.3122,-.0263,.3586,-.0466,.4052,-.0665,.4525,-.0847,.5007,-.1002,.5497,-.113,.5991,-.124,.6491,-.1325,.6994,-.138,.75,-.14]],R=[{start:.36,end:.11},{start:.56,end:.16}];function c(t,n,e,a,i,o,r,l,s){var h,c,u,d,f,v,m,g,p,y,M,w,C,b,k,A,P=O[r],S=((n/=2500)+r-R[r].start)%l,I=(n+r-R[r].end)%l,T=(n+r)%l;if(t.strokeStyle=s,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",S<1){if(t.beginPath(),S*=P.length/2-1,S-=h=Math.floor(S),h*=2,h+=2,t.moveTo(e+(P[h-2]*(1-S)+P[h]*S)*i,a+(P[h-1]*(1-S)+P[h+1]*S)*i),I<1){for(I*=P.length/2-1,I-=c=Math.floor(I),c*=2,c+=2,d=h;d!==c;d+=2)t.lineTo(e+P[d]*i,a+P[d+1]*i);t.lineTo(e+(P[c-2]*(1-I)+P[c]*I)*i,a+(P[c-1]*(1-I)+P[c+1]*I)*i)}else for(d=h;d!==P.length;d+=2)t.lineTo(e+P[d]*i,a+P[d+1]*i);t.stroke()}else if(I<1){for(t.beginPath(),I*=P.length/2-1,I-=c=Math.floor(I),c*=2,c+=2,t.moveTo(e+P[0]*i,a+P[1]*i),d=2;d!==c;d+=2)t.lineTo(e+P[d]*i,a+P[d+1]*i);t.lineTo(e+(P[c-2]*(1-I)+P[c]*I)*i,a+(P[c-1]*(1-I)+P[c+1]*I)*i),t.stroke()}T<1&&(T*=P.length/2-1,T-=u=Math.floor(T),u*=2,f=t,v=n,m=e+(P[(u+=2)-2]*(1-T)+P[u]*T)*i,g=a+(P[u-1]*(1-T)+P[u+1]*T)*i,p=o,y=s,C=2*(w=(M=i/8)/3),b=v%1*F,k=Math.cos(b),A=Math.sin(b),f.fillStyle=y,f.strokeStyle=y,f.lineWidth=p,f.lineCap="round",f.lineJoin="round",f.beginPath(),f.arc(m,g,M,b,b+Math.PI,!1),f.arc(m-w*k,g-w*A,C,b+Math.PI,b,!1),f.arc(m+C*k,g+C*A,w,b+Math.PI,b,!0),f.globalCompositeOperation="destination-out",f.fill(),f.globalCompositeOperation="source-over",f.stroke())}var o=function(t){this.list=[],this.interval=null,this.color=t&&t.color?t.color:"black",this.resizeClear=!(!t||!t.resizeClear)};o.CLEAR_DAY=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);l(t,n,.5*a,.5*i,o,o*v,e)},o.CLEAR_NIGHT=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);s(t,n,.5*a,.5*i,o,o*v,e)},o.PARTLY_CLOUDY_DAY=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);l(t,n,.625*a,.375*i,.75*o,o*v,e),r(t,n,.375*a,.625*i,.75*o,o*v,e)},o.PARTLY_CLOUDY_NIGHT=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);s(t,n,.667*a,.375*i,.75*o,o*v,e),r(t,n,.375*a,.625*i,.75*o,o*v,e)},o.CLOUDY=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);r(t,n,.5*a,.5*i,o,o*v,e)},o.RAIN=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);!function(t,n,e,a,i,o,r){n/=1350;var l,s,h,c,u=.16*i,d=11*F/12,f=7*F/12;for(t.fillStyle=r,l=4;l--;)h=e+(l-1.5)/1.5*(1===l||2===l?-1:1)*u,c=a+(s=(n+l/4)%1)*s*i,t.beginPath(),t.moveTo(h,c-1.5*o),t.arc(h,c,.75*o,d,f,!1),t.fill()}(t,n,.5*a,.37*i,.9*o,o*v,e),r(t,n,.5*a,.37*i,.9*o,o*v,e)},o.SLEET=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);!function(t,n,e,a,i,o,r){n/=750;var l,s,h,c,u=.1875*i;for(t.strokeStyle=r,t.lineWidth=.5*o,t.lineCap="round",t.lineJoin="round",l=4;l--;)s=(n+l/4)%1,b(t,h=Math.floor(e+(l-1.5)/1.5*(1===l||2===l?-1:1)*u)+.5,(c=a+s*i)-1.5*o,h,c+1.5*o)}(t,n,.5*a,.37*i,.9*o,o*v,e),r(t,n,.5*a,.37*i,.9*o,o*v,e)},o.SNOW=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);!function(t,n,e,a,i,o,r){var l,s,h,c,u=.16*i,d=.75*o,f=(n/=3e3)*F*.7,v=Math.cos(f)*d,m=Math.sin(f)*d,g=f+F/3,p=Math.cos(g)*d,y=Math.sin(g)*d,M=f+2*F/3,w=Math.cos(M)*d,C=Math.sin(M)*d;for(t.strokeStyle=r,t.lineWidth=.5*o,t.lineCap="round",t.lineJoin="round",l=4;l--;)s=(n+l/4)%1,b(t,(h=e+Math.sin((s+l/4)*F)*u)-v,(c=a+s*i)-m,h+v,c+m),b(t,h-p,c-y,h+p,c+y),b(t,h-w,c-C,h+w,c+C)}(t,n,.5*a,.37*i,.9*o,o*v,e),r(t,n,.5*a,.37*i,.9*o,o*v,e)},o.WIND=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i);c(t,n,.5*a,.5*i,o,o*v,0,2,e),c(t,n,.5*a,.5*i,o,o*v,1,2,e)},o.FOG=function(t,n,e){var a=t.canvas.width,i=t.canvas.height,o=Math.min(a,i),r=o*v;!function(t,n,e,a,i,o,r){n/=3e4;var l=.21*i,s=.06*i,h=.21*i,c=.28*i;t.fillStyle=r,m(t,n,e,a,l,s,h,c),t.globalCompositeOperation="destination-out",m(t,n,e,a,l,s,h-o,c-o),t.globalCompositeOperation="source-over"}(t,n,.5*a,.32*i,.75*o,r,e),n/=5e3;var l=Math.cos(n*F)*o*.02,s=Math.cos((n+.25)*F)*o*.02,h=Math.cos((n+.5)*F)*o*.02,c=Math.cos((n+.75)*F)*o*.02,u=.936*i,d=Math.floor(u-.5*r)+.5,f=Math.floor(u-2.5*r)+.5;t.strokeStyle=e,t.lineWidth=r,t.lineCap="round",t.lineJoin="round",b(t,l+.2*a+.5*r,d,s+.8*a-.5*r,d),b(t,h+.2*a+.5*r,f,c+.8*a-.5*r,f)},o.prototype={_determineDrawingFunction:function(t){return"string"==typeof t&&(t=o[t.toUpperCase().replace(/-/g,"_")]||null),t},add:function(t,n){var e;"string"==typeof t&&(t=document.getElementById(t)),null!==t&&"function"==typeof(n=this._determineDrawingFunction(n))&&(e={element:t,context:t.getContext("2d"),drawing:n},this.list.push(e),this.draw(e,500))},set:function(t,n){var e;for("string"==typeof t&&(t=document.getElementById(t)),e=this.list.length;e--;)if(this.list[e].element===t)return this.list[e].drawing=this._determineDrawingFunction(n),void this.draw(this.list[e],500);this.add(t,n)},remove:function(t){var n;for("string"==typeof t&&(t=document.getElementById(t)),n=this.list.length;n--;)if(this.list[n].element===t)return void this.list.splice(n,1)},draw:function(t,n){var e=t.context.canvas;this.resizeClear?e.width=e.width:t.context.clearRect(0,0,e.width,e.height),t.drawing(t.context,n,this.color)},play:function(){var e=this;this.pause(),this.interval=n(function(){var t,n=Date.now();for(t=e.list.length;t--;)e.draw(e.list[t],n)},1e3/60)},pause:function(){this.interval&&(e(this.interval),this.interval=null)}},t.Skycons=o}(this);